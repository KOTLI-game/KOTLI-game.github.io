<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            Download KOTLI
        </title>
    </head>
    <body
        style="background-image: linear-gradient(to right, #2c75b9, #003a91);">
        <div style="display: flex; justify-content: center;">
            <h1 id="downloadMessage">
		Thank you for downloading KOTLI
	    </h1>
        </div>
        <h2>
            <div style="display: flex; justify-content: center;">
                <div id="downloadLink"></div>
            </div>
            <div style="display: flex; justify-content: center;">

                <a href="platforms.html" style="color: #ffffff">
                    Other platforms
                </a>

            </div>
        </h2>
        <h3>
            <div style="display: flex; justify-content: center;">
                <a href="/" style="color: #ffffff;">
                    Back
                </a>
            </div>
        </h3>

        <script>
        function getOS() {
            let platform = window.navigator.userAgentData.platform,
                macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
                windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
                linuxPlatforms = ['Linux', 'X11'];

            if (macosPlatforms.includes(platform)) {
                return 'MacOS';
            } else if (windowsPlatforms.includes(platform)) {
                return 'Windows';
            } else if (linuxPlatforms.includes(platform)) {
                return 'Linux';
            } else {
                return 'Unknown';
            }
        }

        window.onload = function() {
            let messageElement = document.getElementById('downloadMessage');
            let downloadLinkElement = document.getElementById('downloadLink');
	    try {
            	var os = getOS();
	    }
	    catch{
                messageElement.textContent = 'Your operating system is not supported.';
		return;
	    }

            if (os === 'Linux') {
                downloadLinkElement.innerHTML = '<a href="KOTLI_linux.zip" style="color: #ffffff;">Click here if the download does not start automatically.</a>';
                window.location.href = 'KOTLI_linux.zip';
            } else if (os === 'Windows') {
                downloadLinkElement.innerHTML = '<a href="KOTLI_windows.zip" style="color: #ffffff;">Click here if the download does not start automatically.</a>';
                window.location.href = 'KOTLI_windows.zip';
            } else if (os === 'MacOS') {
                messageElement.textContent = 'Sorry, macOS is not currently supported.';
            } else {
                messageElement.textContent = 'Your operating system is not supported.';
            }
        };
    </script>
    </body>
</html>
